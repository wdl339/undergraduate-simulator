<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬ç§‘ç”Ÿæ¨¡æ‹Ÿå™¨</title>
    <link rel="stylesheet" href="style.css">
    <!-- å¼•å…¥Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="screen">

        <!-- ä»‹ç»ä¸è®¾ç½® -->
        <div id="screen-intro" style="width:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center;">
            <h1 style="font-size:48px; color:var(--primary); margin-bottom:10px">ğŸ“ æœ¬ç§‘ç”Ÿæ¨¡æ‹Ÿå™¨</h1>
            <p style="color:var(--text-sub); margin-bottom:40px">åœ¨å†…å·ä¸­å­˜æ´»ï¼Œæ´»å‡ºä½ çš„ç²¾å½©</p>
            <button class="btn-primary" onclick="UI.showSetup()" style="font-size:18px; padding:12px 36px">å¼€å¯æœ¬ç§‘ç”Ÿæ¶¯</button>
        </div>

        <div id="screen-setup" class="hidden" style="width:100%; display:flex; flex-direction:column; justify-content:center; align-items:center;">
            <div class="card" style="width:400px">
                <h3>ğŸ“ æ–°ç”Ÿæ¡£æ¡ˆ</h3>
                <div style="margin-bottom:20px">
                    <label style="display:block; margin-bottom:8px; font-weight:600">ç›®æ ‡é™¢æ ¡</label>
                    <select id="select-difficulty" style="width:100%; padding:10px; border-radius:8px; border:1px solid var(--border)"></select>
                </div>
                <div style="margin-bottom:30px">
                    <label style="display:block; margin-bottom:8px; font-weight:600">å…¥å­¦æ€§æ ¼</label>
                    <select id="select-personality" style="width:100%; padding:10px; border-radius:8px; border:1px solid var(--border)"></select>
                </div>
                <button class="btn-primary" style="width:100%" onclick="UI.startGame()">åŠç†å…¥å­¦</button>
            </div>
        </div>

        <!-- çœŸæ­£çš„æ¸¸æˆç•Œé¢ -->
        <div id="screen-game" class="hidden" style="display:flex; width:100%; height:100%">
            <!-- å·¦ä¾§è¾¹æ  -->
            <div class="sidebar">
                <div class="player-card">
                    <p>é™¢æ ¡ï¼š<strong id="display-difficulty"></strong></p>
                    <p>æ€§æ ¼ï¼š<strong id="display-personality"></strong></p>
                </div>

                <div class="sidebar-section-title">ä¸ªäººçŠ¶æ€</div>
                <div id="basic-stats-list"></div>

                <div class="sidebar-section-title">å­¦ä¸šè®°å½•</div>
                <div id="academic-stats-list"></div>
            </div>

            <!-- å³ä¾§ä¸»ç•Œé¢ -->
            <div class="main-view">
                <!-- é¡¶æ  -->
                <div class="top-bar">
                    <div id="game-date" class="game-date">ç¬¬1å¹´ | 9æœˆ</div>
                </div>

                <!-- å·¥ä½œåŒº -->
                <div class="game-workspace">
                    <div class="left-panel" id="card-area">
                        <!-- å¡ç‰‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <div class="right-panel">
                        <div id="goal-tracker" style="margin-bottom:20px; flex-shrink:0"></div>
                        <h4 style="margin:0 0 10px 0; color:var(--text-sub); font-size:12px; text-transform:uppercase; letter-spacing:1px">ç”Ÿæ¶¯è®°å½•</h4>
                        <div id="log-box" style="flex:1; overflow-y:auto; padding-right:5px"></div>
                    </div>
                </div>

                <!-- åº•æ  -->
                <div class="bottom-bar">
                    <div class="project-bar" id="active-project-bar"></div>
                    <div class="action-group">
                        <button class="btn-outline" id="btn-project">ğŸš€ å¼€å±•é¡¹ç›®</button>
                        <button class="btn-outline" id="btn-shop">ğŸ›’ æ ¡å›­è¶…å¸‚</button>
                        <button class="btn-outline" id="btn-goal">ğŸ¯ æ›´æ¢ç›®æ ‡</button>
                        <button class="btn-primary" id="btn-next-phase" onclick="GameState.nextPhase()">è¿›å…¥ä¸‹ä¸€é˜¶æ®µ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»“å±€ç•Œé¢ (Full Overlay) -->
        <div id="screen-ending" class="hidden">
            <!-- JSå¡«å……å†…å®¹ -->
        </div>

    </div>

    <!-- é€šç”¨æ¨¡æ€æ¡† -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">æ ‡é¢˜</h3>
                <button class="btn-close" id="btn-modal-close">Ã—</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <div id="result-overlay" class="modal-overlay">
        <div class="modal-content" style="width:400px">
            <div class="modal-header">
                <h3 id="result-title">ç»“æœ</h3>
            </div>
            <div id="result-body" class="modal-body" style="margin-bottom:20px"></div>
            <div style="text-align:right">
                <button class="btn-primary" id="btn-result-close">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/logic.js"></script>
    <script src="js/ui.js"></script>
    <script>
        window.onload = function() {
            const diffSel = document.getElementById('select-difficulty');
            const persSel = document.getElementById('select-personality');

            // å¡«å……é€‰é¡¹
            for (let k in GameData.difficulties) diffSel.add(new Option(GameData.difficulties[k].name, k));
            for (let k in GameData.personalities) persSel.add(new Option(GameData.personalities[k].name, k));

            UI.init();
        };
    </script>
</body>
</html>